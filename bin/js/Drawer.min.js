function setCentre(){centreX=canvas.width/2,centreY=canvas.height/2}function resizeCanvas(){var e=0,t=0;"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),canvas.width=e,canvas.height=t-document.getElementById("numbers").clientHeight}function draw(){ctx.clearRect(0,0,canvas.width,canvas.height),scaleDrawing();for(var e=0;e<grids.length;e++)if(grids[e].width*scale>=1){ctx.strokeStyle=darkBlue,ctx.globalAlpha=grids[e].opacity,ctx.beginPath(),ctx.rect(centreX+grids[e].xOffset*scale,centreY+grids[e].yOffset*scale,grids[e].width*scale,grids[e].width*scale),ctx.stroke(),ctx.closePath(),ctx.strokeStyle=lightBlue,ctx.globalAlpha=1,ctx.beginPath();var t=centreX+grids[e].xLineStart*scale,i=centreY+grids[e].yLineStart*scale;ctx.moveTo(t,i),grids[e].animated||(grids[e].incrementLineLength(),grids[e].incrementOpacity()),ctx.lineTo(t+grids[e].xLineTo*scale,i+grids[e].yLineTo*scale),ctx.stroke(),ctx.closePath()}grids[grids.length-1].animated&&stepForward(),drawTitle(),drawVersion(),drawDebug()}function scaleDrawing(){(centreX+minX*scale<.05*canvas.width||centreX+maxX*scale>.95*canvas.width||centreY+minY*scale<.05*canvas.height||centreY+maxY*scale>.95*canvas.height)&&scale>0&&(scale=.9*scale)}function drawTitle(){ctx.fillStyle=lightBlue,ctx.font="42px Arial",ctx.beginPath(),ctx.fillText("Fibonnaci-er",15,45),ctx.closePath()}function drawVersion(){ctx.fillStyle=red,ctx.font="10px Arial",ctx.beginPath(),ctx.fillText(version,15,canvas.height-15),ctx.closePath()}function drawDebug(){debug&&(ctx.fillStyle=red,ctx.font="10px Arial",ctx.beginPath(),ctx.fillText("scale: "+scale,15,15),ctx.fillText("grids["+(grids.length-1)+"]: "+grids[grids.length-1].orientation,15,30),ctx.fillText("xLineTo: "+grids[grids.length-1].xLineTo,15,45),ctx.fillText("yLineTo: "+grids[grids.length-1].yLineTo,15,60),ctx.fillText("width:"+grids[grids.length-1].width,15,75),ctx.fillText("animated: "+grids[grids.length-1].animated,15,90),ctx.closePath())}